<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Madamji ka Happy Birthday &lt;3</title>
<meta name="description" content="A playful, personal Krishna-night birthday story with Bollywood romance, Haryanvi fun, diya, balloons, card, fireworks, and vows—crafted just for her." />
<style>
  /* =================== THEME =================== */
  :root{
    /* base night */
    --night1:#0a0f26; --night2:#120f2e;
    /* palette */
    --pink:#ff9ccc; --denim:#4f6fa8; --beige:#f5e6cc; --black:#0b0b10;
    --ink:#e9ecff; --muted:#c9d2f0; --flower:#ffc8dd; --gold:#f6d06e;
    --accent:#9bd3ff; /* default (can be overridden by theme) */
  }
  .theme-pink { --accent: var(--pink); }
  .theme-denim{ --accent: var(--denim); }
  .theme-beige{ --accent: #c79f6c; --ink:#fff8ef; --muted:#f1e1cf; }
  .theme-black{ --accent: #d1d5db; --night1:#06070b; --night2:#0b0c12; }

  html,body{height:100%}
  html{scroll-behavior:smooth}
  body{
    margin:0; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background:
      radial-gradient(1100px 560px at 50% -10%, rgba(138,180,255,.18), transparent 70%),
      linear-gradient(180deg, var(--night1), var(--night2));
    overflow-x:hidden;
  }
  .container{max-width:1100px;margin:0 auto;padding:0 16px}
  .section{min-height:100vh; display:grid; place-items:center; position:relative; padding:80px 0}
  .center{ text-align:center }

  /* Stars */
  .stars{
    position:fixed; inset:0; pointer-events:none; z-index:-1; opacity:.9;
    background:
      radial-gradient(2px 2px at 20% 30%, #fff, transparent 60%),
      radial-gradient(2px 2px at 80% 20%, #fff, transparent 60%),
      radial-gradient(1.5px 1.5px at 30% 80%, #fff, transparent 60%),
      radial-gradient(1.5px 1.5px at 70% 70%, #fff, transparent 60%),
      radial-gradient(1.5px 1.5px at 50% 50%, #fff, transparent 60%);
    animation: twinkle 6s ease-in-out infinite alternate;
  }
  @keyframes twinkle { from{opacity:.6} to{opacity:1} }

  /* Constellation canvas (stars forming initials) */
  #constellation{
    position:fixed; inset:0; z-index:0; pointer-events:none; opacity:.85; mix-blend-mode:screen;
  }

  /* Pastel petals */
  .petal{ position:fixed; top:-40px; width:16px; height:16px; background:radial-gradient(circle at 30% 30%, #fff, transparent 60%), var(--flower);
          border-radius:40% 60% 60% 40% / 60% 60% 40% 40%; opacity:.7; filter:drop-shadow(0 8px 10px rgba(255,200,221,.25)); pointer-events:none; z-index:0}
  @media (prefers-reduced-motion: reduce){
    .petal{display:none}
    .float, .balloon, .sparkle, .fade-in, .typewriter{animation:none!important; transition:none!important}
  }

  /* Buttons */
  .btn{
    appearance:none; border:none; border-radius:999px; padding:14px 20px; font-weight:800; cursor:pointer;
    background:linear-gradient(90deg, var(--accent), #b794ff); color:#0c0e1a; box-shadow:0 14px 28px rgba(0,0,0,.25);
  }
  .btn:active{transform:translateY(1px) scale(.99)}
  .pill{ display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; font-size:12px;
         border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--ink) }

  /* Theme chips */
  .themes{ position:fixed; right:12px; top:12px; display:flex; gap:8px; z-index:12 }
  .chip{ width:26px; height:26px; border-radius:50%; border:2px solid rgba(255,255,255,.5); cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,.25) }
  .chip.pink{ background:var(--pink) } .chip.denim{ background:var(--denim) } .chip.beige{ background:var(--beige) } .chip.black{ background:var(--black) }

  /* Chapters progress bar */
  .chapters{
    position:fixed; bottom:12px; left:50%; transform:translateX(-50%);
    display:flex; gap:8px; z-index:10; background:rgba(12,14,26,.35); padding:8px 12px; border-radius:999px;
    border:1px solid rgba(255,255,255,.08); backdrop-filter: blur(6px);
  }
  .dot{ width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,.28); box-shadow:inset 0 0 0 1px rgba(255,255,255,.15) }
  .dot.active{ background:linear-gradient(180deg,var(--accent),#c9a7ff) }

  /* LANDING */
  .landing-inner{ text-align:center; max-width:780px }
  .title{ font-size:clamp(22px, 5vw, 36px); line-height:1.3; opacity:0; transform:translateY(12px); animation:fadeUp .9s ease .2s forwards }
  @keyframes fadeUp{ to{opacity:1; transform:none} }
  .walk{ margin-top:24px; }

  /* THE SPARK (Diya) */
  .spark-wrap{ display:grid; gap:22px; justify-items:center; text-align:center; max-width:760px }
  .diya{ width:150px; height:150px; position:relative; filter: drop-shadow(0 30px 40px rgba(246,208,110,.22));
         transform: translateY(8px) scale(.96); transition:.7s ease; }
  .diya .bowl{ position:absolute; bottom:10px; left:50%; transform:translateX(-50%); width:140px; height:60px;
    background:radial-gradient(150px 60px at 50% 0%, #6b3b1b, #341c0f 70%); border-radius:80px 80px 30px 30px / 40px 40px 30px 30px; box-shadow: inset 0 10px 26px rgba(255,255,255,.06) }
  .diya .oil{ position:absolute; bottom:34px; left:50%; transform:translateX(-50%); width:120px; height:20px; background:radial-gradient(120px 20px at 50% 60%, #2c1409, #120803 70%); border-radius:999px }
  .flame{ position:absolute; left:50%; bottom:54px; transform:translateX(-50%) rotate(-2deg); width:22px; height:36px;
    background: radial-gradient(ellipse at 50% 20%, #fff6b0, #ffd275 40%, rgba(255,120,64,.9) 70%, rgba(255,120,64,0) 75%);
    border-radius:50% 50% 50% 50% / 70% 70% 30% 30%; opacity:.0; filter:blur(.3px); }
  .glow{ position:absolute; left:50%; bottom:54px; transform:translateX(-50%); width:120px; height:120px; border-radius:50%;
    background: radial-gradient(closest-side, rgba(255,214,110,.42), rgba(255,214,110,0)); opacity:0; pointer-events:none; }
  .diya.lit{ transform:translateY(0) scale(1) }
  .diya.lit .flame{ animation:flicker .18s infinite alternate .2s; opacity:1 }
  .diya.lit .glow{ animation:glow 1.2s ease-in-out infinite alternate .2s; opacity:1 }
  @keyframes flicker{ from{ transform:translateX(-50%) rotate(-2deg) scaleY(1)} to{ transform:translateX(-50%) rotate(2deg) scaleY(1.07)} }
  @keyframes glow{ from{ transform:translateX(-50%) scale(.9)} to{ transform:translateX(-50%) scale(1.05)} }

  /* Typewriter (multi-line) */
  .typewriter{
    font-size:clamp(16px, 3.6vw, 22px); color:var(--muted);
    display:block; max-width:min(92vw, 760px); margin:0 auto; white-space:normal; overflow:visible; opacity:.9;
  }
  .typewriter::after{ content:""; display:inline-block; width:2px; height:1em; background:var(--muted); margin-left:4px; animation: caret 700ms steps(1) infinite }
  @keyframes caret { 50%{ opacity:0 } }

  /* PLAYFUL BLESSINGS — balloons */
  .balloon-area{ position:relative; height:70vh; max-height:700px; width:100%; overflow:hidden; border-radius:18px;
    border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
  }
  .balloon{
    --c:var(--pink); --x:10; --delay:0;
    position:absolute; bottom:-120px; left:calc(var(--x) * 1%); width:64px; height:80px; border-radius:50% 50% 45% 45% / 55% 55% 45% 45%;
    background: radial-gradient(circle at 30% 30%, #fff8, transparent 60%), var(--c);
    box-shadow: inset -10px -16px 24px rgba(0,0,0,.2);
    animation: floatUp 16s linear infinite; animation-delay: calc(var(--delay) * 1s);
    display:grid; place-items:center; color:#0c0e1a; font-weight:900; text-shadow:0 1px 0 #ffffff88; cursor:pointer;
  }
  .balloon::after{ content:""; position:absolute; width:2px; height:120px; background:rgba(255,255,255,.3); left:50%; bottom:-120px }
  .balloon span{ background:#fff; padding:4px 8px; border-radius:999px; font-size:12px; }
  @keyframes floatUp { from{ transform:translateY(0) } to{ transform:translateY(-105vh) } }

  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.5); z-index:50 }
  .modal.show{ display:flex }
  .dialog{ max-width:560px; margin:16px; background:linear-gradient(180deg, #0e1628, #0c1323); border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:18px; text-align:center; box-shadow:0 18px 40px rgba(0,0,0,.44) }
  .dialog h4{ margin:.25rem 0 .5rem; font-size:20px }
  .dialog p{ margin:0; color:#c8d2f0 }
  .dialog .close{ margin-top:12px }

  /* FILMY INTERLUDE */
  .filmy-wrap{width:min(960px,95vw);margin:0 auto;display:grid;gap:16px;justify-items:center;text-align:center}
  .filmy-heading{font-weight:900;letter-spacing:.06em;color:var(--accent);text-transform:uppercase;font-size:12px}
  .chat{display:grid;gap:10px;width:min(720px,95vw);margin:8px auto 2px}
  .bubble{
    justify-self:start; max-width:85%; padding:12px 14px; border-radius:16px;
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.10); color:#dfe6ff; line-height:1.6; opacity:0; transform:translateY(6px);
    animation: bubbleIn .4s ease forwards;
  }
  .bubble.you{ justify-self:end; background:linear-gradient(180deg, rgba(155,211,255,.16), rgba(155,211,255,.06)); color:#0c1220 }
  @keyframes bubbleIn{to{opacity:1; transform:none}}
  .type-on{ display:inline-block; border-right:2px solid #cdd6ff; white-space:normal; overflow:visible }
  .pose{display:grid;gap:10px;place-items:center;margin-top:6px}
  .pose svg{opacity:.92;filter:drop-shadow(0 8px 22px rgba(0,0,0,.35))}
  .pose .pulse{animation:posePulse 1.8s ease-in-out infinite}
  @keyframes posePulse{50%{transform:scale(1.04)}}
  .pose .pose-btn{background:linear-gradient(90deg,#ffd86e,#ff98c0);color:#15121d}
  .shayari{width:min(720px,95vw);padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,.10);
    background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.03));box-shadow:0 12px 28px rgba(0,0,0,.25)}
  .shayari p{margin:0;color:#e9ecff;font-size:clamp(16px,3.4vw,20px);line-height:1.7}
  .shayari .actions{display:flex;gap:8px;justify-content:center;margin-top:10px;flex-wrap:wrap}
  .toast{position:fixed;left:50%;bottom:80px;transform:translateX(-50%);background:rgba(15,23,42,.9);
    color:#e9ecff;border:1px solid rgba(255,255,255,.12);padding:8px 12px;border-radius:10px;display:none;z-index:60}
  .toast.show{display:block;animation:fadeUp .35s ease, fadeOut .6s ease 1.6s forwards}
  @keyframes fadeOut{to{opacity:0; transform:translate(-50%,20px)}}
  .em{position:fixed; font-size:20px; pointer-events:none; z-index:40; will-change:transform,opacity}

  /* Haryanvi card */
  .hv-card{width:min(720px,95vw);padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,.10);
    background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.03)); box-shadow:0 12px 28px rgba(0,0,0,.25)}
  .hv-row{display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px;margin:6px 0}
  .hv-phrase{font-size:clamp(16px,3.4vw,20px);color:#fff}
  .hv-meaning{font-size:14px;color:var(--muted)}
  .hv-btn{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.08);color:var(--ink);cursor:pointer}

  /* DIVINE BLESSINGS — temple + flip card */
  .temple-bg{ position:absolute; inset:0; pointer-events:none; opacity:.25; background:radial-gradient(1200px 600px at 50% 10%, rgba(155,211,255,.08), transparent 60%) }
  .card-3d{ perspective:1200px; width:min(680px, 92vw) }
  .flip{ position:relative; transform-style:preserve-3d; transition: transform .8s ease; cursor:pointer; }
  .flip .face{ backface-visibility:hidden; border-radius:18px; padding:22px; border:1px solid rgba(255,255,255,.08);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); box-shadow:0 18px 40px rgba(0,0,0,.2) }
  .flip .back{ position:absolute; inset:0; transform: rotateY(180deg) }
  .flip.is-flipped{ transform: rotateY(180deg) }
  .front-title{ font-weight:900; letter-spacing:.12em; color:var(--gold); text-transform:uppercase; font-size:12px }
  .front-text{ font-size:clamp(16px, 3.4vw, 20px); color:var(--muted) }

  /* FINAL — fireworks/confetti */
  #fireCanvas{ position:absolute; inset:0; pointer-events:none }
  .final-inner{ text-align:center; max-width:820px }
  .glowtext{ font-size:clamp(22px, 5vw, 38px); line-height:1.35; text-shadow:0 0 18px rgba(155,211,255,.25) }
  .endbtn{ margin-top:22px; background:linear-gradient(90deg,#ffd86e,#ff98c0); color:#15121d }
  .stack{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px }

  /* Promise tokens */
  .tokens{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:12px 0 0 }
  .token{
    width:60px; height:60px; border-radius:16px; display:grid; place-items:center; font-size:24px; cursor:pointer;
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.10); box-shadow:0 10px 24px rgba(0,0,0,.25);
    transition: transform .2s ease;
  }
  .token:active{ transform:scale(.97) }

  /* Love letter overlay */
  .letter-overlay{ position:fixed; inset:0; background:rgba(10,14,22,.68); backdrop-filter:blur(4px);
    display:none; align-items:center; justify-content:center; z-index:60; }
  .letter-overlay.show{ display:flex }
  .letter-card{ max-width:820px; margin:16px; border-radius:20px; padding:22px;
    border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(180deg,#0e1628,#0b1120);
    box-shadow:0 18px 40px rgba(0,0,0,.4); }
  .letter-card h3{ margin:0 0 8px; letter-spacing:.08em; text-transform:uppercase; color:var(--accent); font-size:12px }
  .letter-card p{ line-height:1.85; color:#cfe2ff; margin:0 0 12px }

  /* Welcome overlay */
  .welcome{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background:rgba(9,12,24,.65); backdrop-filter: blur(6px);
    z-index:70; padding:18px;
  }
  .welcome .card{ width:min(720px, 92vw); border-radius:22px; padding:22px; text-align:center;
    border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,#0f1730,#0c1226); box-shadow:0 18px 44px rgba(0,0,0,.45) }
  .welcome h2{ margin:.2rem 0 .6rem; font-size:clamp(20px, 5vw, 30px) }
  .welcome p{ margin:.2rem 0 1rem; color:#cfe2ff }
  .welcome .btn{ font-weight:900 }

  /* Monogram + tooltip */
  .mono{ position:fixed; top:14px; left:14px; z-index:20; width:44px; height:44px; border-radius:50%;
    background:radial-gradient(circle at 35% 35%, #ffe, #ffd173);
    color:#1b1324; font-weight:900; display:grid; place-items:center;
    box-shadow:0 8px 20px rgba(0,0,0,.35), inset 0 2px 8px rgba(255,255,255,.5);
    letter-spacing:.02em; cursor:pointer; user-select:none; }
  .mono.bounce{ animation:monoB .6s ease } @keyframes monoB{ 50%{ transform:scale(1.08) } }
  .mono-tip{ position:fixed; top:64px; left:14px; z-index:21; background:rgba(15,23,42,.9); color:#e9ecff; border:1px solid rgba(255,255,255,.12);
    padding:8px 10px; border-radius:12px; font-size:12px; display:none; }
  .mono-tip.show{ display:block }

  /* Certificate overlay */
  .cert{ position:fixed; inset:0; z-index:65; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.55); backdrop-filter: blur(4px); }
  .cert.show{ display:flex }
  .cert-card{ width:min(680px, 92vw); padding:22px; border-radius:18px; text-align:center; background:linear-gradient(180deg,#10182e,#0c1324); border:1px solid rgba(255,255,255,.12); box-shadow:0 18px 44px rgba(0,0,0,.5) }
  .cert-title{ text-transform:uppercase; letter-spacing:.12em; font-size:12px; color:var(--accent) }
  .wax{ width:64px; height:64px; margin:10px auto 0; border-radius:50%; background: radial-gradient(circle at 35% 35%, #ffefcf, #f6d06e 60%, #c7962b);
        box-shadow:0 6px 14px rgba(0,0,0,.35), inset 0 2px 10px rgba(255,255,255,.5); position:relative; overflow:hidden; }
  .wax::after{ content:""; position:absolute; top:-8px; left:50%; transform:translateX(-50%); width:10px; height:18px; background:#f6d06e; border-radius:6px; animation: drip 2.5s ease-in-out infinite }
  @keyframes drip{ 0%{ top:-8px; opacity:0 } 20%{ opacity:1 } 100%{ top:64px; opacity:0 } }

  /* Watermark */
  .watermark{ position:fixed; right:12px; bottom:10px; z-index:15; font-size:12px; color:#bac3e0; opacity:.92; background:rgba(0,0,0,.2);
    padding:6px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.08); animation: wmFade 7s ease forwards 4s }
  @keyframes wmFade{ to{ opacity:0 } }

  /* Peacock feather trail */
  .feather{ position:fixed; top:30vh; left:-140px; width:140px; height:auto; z-index:8; opacity:.95; filter: drop-shadow(0 10px 20px rgba(0,0,0,.35)); animation: fly 5s ease-in-out forwards }
  @keyframes fly{ 0%{ transform:translateX(-20px) rotate(-10deg) } 60%{ transform:translateX(calc(100vw + 40px)) rotate(5deg) } 100%{ transform:translateX(calc(120vw)) rotate(10deg); opacity:.8 } }

  /* Her-day shimmer */
  body.her-day .flame{ animation: flicker .14s infinite alternate .1s }
  body.her-day .glow{ box-shadow:0 0 26px rgba(246,208,110,.55) }

  /* print: hide overlays when printing */
  @media print{ .section, .stars, #petals, #constellation, .chapters, .mono, .mono-tip, .watermark, #welcome, #letter, #cert { display:none !important } }
  .fade-in{ animation:fadeUp .9s ease .2s both }
  .sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
</style>
</head>
<body>
  <!-- Theme chips -->
  <div class="themes">
    <button class="chip black"  data-theme="black"  title="Black"></button>
    <button class="chip pink"   data-theme="pink"   title="Pink"></button>
    <button class="chip denim"  data-theme="denim"  title="Denim"></button>
    <button class="chip beige"  data-theme="beige"  title="Beige"></button>
  </div>

  <!-- Monogram + tip -->
  <div class="mono" id="monogram" aria-label="Personal seal">💛</div>
  <div class="mono-tip" id="monoTip">Made for you</div>

  <!-- Star field + Constellation -->
  <canvas id="constellation" aria-hidden="true"></canvas>
  <div class="stars" aria-hidden="true"></div>

  <!-- Drifting petals -->
  <div id="petals" aria-hidden="true"></div>

  <!-- Fixed chapters progress -->
  <nav class="chapters" aria-label="Story progress">
    <span class="dot active" data-target="#landing" title="First Light"></span>
    <span class="dot" data-target="#spark"   title="The Spark"></span>
    <span class="dot" data-target="#playful" title="Blessings"></span>
    <span class="dot" data-target="#filmy"   title="Filmy"></span>
    <span class="dot" data-target="#divine"  title="Divine"></span>
    <span class="dot" data-target="#final"   title="Promise"></span>
  </nav>

  <!-- Background Audio: YouTube overlay (user-gesture) OR gentle WebAudio -->
  <button id="soundToggle" class="sr-only" aria-label="Toggle sound"></button>
  <div id="ytOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); z-index:80; align-items:center; justify-content:center;">
    <div style="width:min(860px,92vw); aspect-ratio:16/9; background:#000; border:1px solid rgba(255,255,255,.12); border-radius:12px; overflow:hidden; position:relative;">
      <iframe id="ytFrame" width="100%" height="100%" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      <button id="ytClose" class="pill" style="position:absolute; right:10px; top:10px;">Close ✖</button>
    </div>
  </div>

  <!-- WELCOME overlay -->
  <div class="welcome" id="welcome">
    <div class="card">
      <h2>Hi <span id="welcomeName">you</span> 🌸</h2>
      <p>I made this little night sky just for you. Walk with me and let the blessings unfold.</p>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
        <button class="btn" id="startJourney">